body {
    margin: 0;
    font-family: 'Noto Sans JP', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    /* 2035年風の深い夜景グラデ＋サブリム光 */
    background: radial-gradient(circle at 10% 10%, #07132a 0%, transparent 30%),
                linear-gradient(180deg, #07132a 0%, #0b2a3a 40%, #0e1b2b 100%);
    color: #e6f7ff;
}

.layout {
    display: flex;
    min-height: 100vh;
    flex-direction: column; /* mobile-first: stack */
    align-items: center;
    padding-top: 12px;
}

.left-pane {
    width: 100%;
    max-width: 420px;
    background: linear-gradient(180deg, #2E7D32 0%, #66BB6A 100%);
    padding: 16px;
    box-sizing: border-box;
    margin: 8px;
}

/* テキスト行数で折りたたむ (3行) */
.clamp-3 {
    display: -webkit-box;
    /* standard property for line-clamp (for linter/compatibility) */
    line-clamp: 3;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.content {
    flex: 1;
    width: 100%;
    max-width: 1080px; /* コンテンツの最大幅を制限して中央に見せる */
    padding: 12px;
}

.card {
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
    border-radius: 14px;
    padding: 16px;
    box-shadow: 0 10px 24px rgba(2,6,23,0.55), inset 0 1px 0 rgba(255,255,255,0.02);
    backdrop-filter: blur(6px);
}

.badge {
    display: inline-block;
    background: linear-gradient(90deg,#ff0078,#6efff5);
    color: #00121a;
    padding: 8px 12px;
    border-radius: 999px;
    font-size: 14px;
    margin-bottom: 14px;
    font-weight: 700;
}

.title {
    font-size: 20px;
    margin: 6px 0;
    color: #e6f7ff;
    font-weight: 800;
}

.author {
    font-size: 18px;
    color: #cfeefc;
    margin: 6px 0;
}

.desc {
    font-size: 18px;
    color: #bfeaf8;
    margin: 12px 0 18px 0;
    line-height: 1.6;
}

.actions {
    display: flex;
    gap: 12px;
}

.btn {
    display: inline-block;
    background: linear-gradient(90deg,#00fff0,#6a8cff);
    color: #00121a;
    padding: 12px 14px;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 800;
    box-shadow: 0 8px 20px rgba(58,70,200,0.18), 0 2px 6px rgba(0,0,0,0.22);
    touch-action: manipulation;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
}

.btn-secondary {
    background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    border: 1px solid rgba(255,255,255,0.06);
    color: #bfeaf8;
}

/* Button animations */
.btn { transition: transform 180ms cubic-bezier(.2,.9,.2,1), box-shadow 180ms; }
.btn:hover { transform: translateY(-4px); }
.btn:active { transform: translateY(-1px) scale(0.995); }

/* toggle button style */
.toggle-desc { margin-top: 12px; display: inline-block; }

/* desc transition is handled inline by JS via max-height */

@media (max-width: 900px) {
    .left-pane { width: calc(100% - 24px); max-width: 520px; }
    .layout { flex-direction: column; align-items: center; padding-top: 10px; }
    .content { padding-left: 0; }
}

/* Device-specific practical tweaks ------------------------------------------------- */
/* iPhone SE (small narrow viewport) - approx 320px width */
@media only screen and (max-width: 360px){
    .card { padding: 12px; border-radius: 12px; }
    .title { font-size: 18px; }
    .btn { padding: 12px 12px; font-size: 15px; }
    .card-ui { min-width: 56px; padding: 10px; font-size: 16px; }
    .chat-box { max-height: 180px; }
}

/* larger modern phones (iPhone 14, Pixel, Galaxy typical widths 375-430) */
@media only screen and (min-width: 361px) and (max-width: 440px){
    .card { padding: 14px; }
    .title { font-size: 19px; }
    .btn { padding: 12px 14px; font-size: 16px; }
    .card-ui { min-width: 60px; padding: 12px; font-size: 17px; }
}

/* safe-area for iOS notch devices - ensure spacing from top/bottom chrome */
:root { --safe-top: env(safe-area-inset-top); --safe-bottom: env(safe-area-inset-bottom); }
body { padding-top: calc(12px + var(--safe-top)); padding-bottom: calc(18px + var(--safe-bottom)); }

/* Larger tap areas for interactive elements */
.btn, .btn-small { touch-action: manipulation; padding: 14px 16px; border-radius: 12px; }
.btn-small { padding: 10px 12px; }

/* remove hover translate on touch devices to avoid accidental lifts */
@media (hover: none) {
    .btn:hover { transform: none; }
}

/* slightly bigger chat area on phones */
@media (max-width: 520px){
    .chat-box { max-height: 260px; }
}

/* ensure modal content is comfortably tappable */
.modal .btn { min-width: 84px; }

/* platform-specific tweaks: Android devices sometimes render fonts larger - normalize */
@supports (-webkit-touch-callout: none) {
    /* iOS specific adjustments if necessary */
}

/* end device-specific tweaks ----------------------------------------------------- */

/* Desktop layout: side-by-side */
@media (min-width: 901px) {
    .layout { flex-direction: row; align-items: flex-start; padding-top: 20px; }
    .left-pane { width: 420px; margin-left: 40px; }
    .layout--game .content { padding-left: 60px; }
}

/* Index page centered variant: place the left card centered in viewport */
.layout--centered {
    align-items: center; /* 垂直も中央 */
}

.layout--centered .left-pane {
    margin: 0 auto; /* 横中央 */
    transform: translateY(-20px);
}

.layout--centered .content { display: none; }

/* header */
.site-header {
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding: 12px 24px;
    position: sticky;
    top: 0;
    z-index: 40;
    backdrop-filter: blur(4px);
}
.header-inner { max-width: 1100px; margin: 0 auto; }
.nav-tabs { display: flex; gap: 12px; }
.tab { padding: 8px 14px; border-radius: 999px; text-decoration: none; color: #bfeaf8; font-weight:700; }
.tab.active { background: linear-gradient(90deg,#00fff0,#6a8cff); color: #00121a; box-shadow: 0 8px 20px rgba(58,70,200,0.18); }

/* game layout: show left pane + large right content for cards */
.layout--game { justify-content: flex-start; align-items: flex-start; padding-top: 18px; }
.layout--game .left-pane { margin-left: 40px; }
.layout--game .content { display: block; padding-left: 60px; }
.layout--game .hand-row { font-size: 20px; }
.center-pile { min-height: 80px; }

/* Daifugo specific */
.hand-row, .center-pile {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 16px;
}

.card-ui {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding: 12px 14px;
    border-radius: 10px;
    box-shadow: 0 10px 30px rgba(5,10,30,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    min-width: 64px;
    text-align: center;
    font-weight: 800;
    color: #e6f7ff;
}

/* selected card: stronger visual emphasis so players can easily see selection */
.card-ui.selected {
    transform: translateY(-10px) scale(1.05);
    box-shadow: 0 22px 48px rgba(0,0,0,0.7), 0 4px 12px rgba(2,200,180,0.06);
    border: 2px solid rgba(0,200,180,0.18);
    outline: 3px solid rgba(0,200,180,0.10);
    background: linear-gradient(180deg, rgba(0,200,180,0.04), rgba(255,255,255,0.01));
    transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease, outline 150ms ease, background 150ms ease;
}

/* played animation */
.played-anim { animation: playedFlash 0.6s ease-in-out; }
@keyframes playedFlash { 0%{transform: translateY(-8px) scale(1.02)} 50%{transform: translateY(-18px) scale(1.06)} 100%{transform: translateY(0) scale(1)} }

/* flying card animation: clone card moves to center */
.fly-clone {
    position: fixed;
    z-index: 4000;
    pointer-events: none;
    transition: transform 520ms cubic-bezier(.2,.9,.2,1), opacity 400ms ease;
    will-change: transform, opacity;
}

/* smooth center pile updates */
.center-pile { transition: all 220ms ease; }

/* player list highlight */
.players-list li.current-turn { background: linear-gradient(90deg,#00fff0, #6a8cff); color: #00121a; padding: 6px 10px; border-radius: 8px; font-weight:800; }

/* toast */
.toast { position: fixed; left: 50%; transform: translateX(-50%); bottom: 22px; background: rgba(0,0,0,0.8); color: #fff; padding: 10px 14px; border-radius: 10px; z-index: 9999; font-weight:700; }
.toast.show { opacity: 1; transition: opacity 200ms ease-in-out; }

/* SSE status */
.sse-status { display: inline-block; padding: 6px 10px; border-radius: 8px; font-weight:700; font-size:13px; }
.sse-connected { background: linear-gradient(90deg,#6effa1,#00d4ff); color: #00211a; }
.sse-disconnected { background: rgba(255,255,255,0.04); color: #bfeaf8; border: 1px solid rgba(255,255,255,0.04); }

/* Modal overlay */
.modal {
    position: fixed;
    inset: 0;
    display: none; /* hidden by default; JS toggles display */
    align-items: center;
    justify-content: center;
    background: rgba(2,6,23,0.7);
    z-index: 2000;
    padding: 16px;
}
.modal[aria-hidden="false"] { display: flex; }
.modal-content {
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 24px 60px rgba(2,6,23,0.6);
    max-width: 720px;
    width: 100%;
    color: #e6f7ff;
    animation: modalPop 220ms cubic-bezier(.2,.9,.2,1);
}
@keyframes modalPop { from { transform: translateY(12px) scale(.98); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }

/* modal hand row: slightly larger cards */
#giveHand .card-ui { min-width: 84px; padding: 14px 16px; font-size: 18px; cursor: pointer; }
#giveHand .card-ui.selected { outline: 3px solid rgba(110,255,245,0.12); box-shadow: 0 20px 50px rgba(0,0,0,0.6); transform: translateY(-10px) scale(1.04); }

/* buttons in modal */
.modal .btn { padding: 10px 14px; border-radius: 10px; }
.modal .btn-secondary { background: rgba(255,255,255,0.04); color: #cfeefc; }

@media (max-width: 700px){
    .modal-content { max-width: 520px; padding: 12px; }
    #giveHand .card-ui { min-width: 64px; font-size: 16px; }
    .btn { padding: 12px 14px; font-size: 16px; }
}

/* Avatar style for recipient */
.avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    color: #00121a;
    box-shadow: 0 6px 18px rgba(2,6,23,0.6);
    text-transform: uppercase;
}

/* mass discard modal: rank buttons */
#massRankButtons .btn { padding: 8px 10px; border-radius: 8px; font-weight:800; }
#massRankButtons .btn:hover { transform: translateY(-3px); }
#massRankButtons .btn.small { padding:6px 8px; font-size:14px }
#massRankButtons .btn.active { box-shadow: 0 12px 30px rgba(0,200,200,0.12); }
#massRankCustom { padding: 8px 10px; border-radius: 8px; background: rgba(255,255,255,0.02); color: #e6f7ff; border: 1px solid rgba(255,255,255,0.04); }

/* chat */
.chat-box { max-height: 220px; overflow-y: auto; padding: 8px; background: rgba(0,0,0,0.04); border-radius: 10px; }
.chat-line { padding: 6px 8px; margin-bottom:6px; border-radius:8px; background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); }
.chat-line .chat-time { margin-right:8px; color: #9ed8ff; }
.chat-line strong { margin-right:8px; color: #e0fff8; }
.chat-line .card-chip { margin-left:6px; margin-right:4px; }
.card-chip { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; margin-left:6px; border-radius:10px; font-weight:800; font-size:13px; color:#00121a; }
.chip-suit { font-size:14px; margin-right:4px; }
.chip-red { background: linear-gradient(90deg,#ffdede,#ffb3b3); }
.chip-black { background: linear-gradient(90deg,#dfefff,#b3d4ff); }

/* Shiritori specific: ensure messages and player list text are readable on dark background */
/* Shiritori specific: ensure messages and player list text are readable on dark background */
#messages, #players, #messages > div, #players pre, #players div, .chat-line, .chat-box {
    color: #0b2a33 !important; /* dark teal for message text (better than pure black on blue backgrounds) */
}

/* Sender name and important badges should stand out */
.chat-line strong { color: #0f7183 !important; } /* medium teal */
.chat-line .chat-time { color: #7fb7c6 !important; } /* muted cyan for timestamps */

/* SVG chip variant */
.card-chip svg { width: 20px; height: 20px; vertical-align: middle; }

/* external image icon for chips */
.card-chip .chip-icon { width:20px; height:20px; display:inline-block; vertical-align:middle; }

/* tooltip for card details */
.chip-tooltip { position: absolute; background: rgba(2,6,23,0.95); color: #e6f7ff; padding: 8px 10px; border-radius: 8px; font-size: 13px; box-shadow: 0 12px 30px rgba(0,0,0,0.6); z-index: 3000; display: none; max-width: 60vw; }
.chip-tooltip::after { content: ''; position: absolute; width: 10px; height: 10px; transform: rotate(45deg); background: rgba(2,6,23,0.95); box-shadow: 0 4px 12px rgba(0,0,0,0.25); }

/* placement helpers - JS positions tooltip and may set data-placement attr for arrow positioning */
.chip-tooltip[data-placement="right"]::after { left: -5px; top: 12px; }
.chip-tooltip[data-placement="left"]::after { right: -5px; top: 12px; }
.chip-tooltip[data-placement="top"]::after { bottom: -5px; left: 12px; }
.chip-tooltip[data-placement="bottom"]::after { top: -5px; left: 12px; }

/* current turn countdown bar */
.current-turn-banner { display:inline-block; min-width:220px; text-align:center; }
.turn-timer { display:inline-block; width:160px; height:10px; background: rgba(255,255,255,0.04); border-radius:6px; margin-left:10px; vertical-align:middle; overflow:hidden; }
.turn-progress { height:100%; background: linear-gradient(90deg,#00ff9d,#00d4ff); width:100%; transition: width 0.3s linear; }

/* Bot thinking indicator appended to player list items */
.bot-thinking{
    display:inline-block;
    margin-left:8px;
    width:40px;
    height:18px;
    vertical-align:middle;
    color:#cfeefc;
    font-size:12px;
}
.bot-thinking::after{
    content: "\2022 \2022 \2022"; /* three dots */
    display:inline-block;
    animation: blinkDots 1s steps(3,end) infinite;
    opacity:0.95;
}
/* Shiritori layout helpers */
#player_list { background: #f6f6f6; border-radius: 6px; }
#player_list li.current-turn { background: linear-gradient(90deg,#00fff0, #6a8cff); color: #00121a; }
#used_words { background: #ffffff; border-radius:6px; }
#messages { background: #ffffff; border-radius:6px; }
.chat-line { background: transparent; }
@keyframes blinkDots{
    0%{ opacity:0.2 }
    50%{ opacity:1 }
    100%{ opacity:0.2 }
}

/* Daifugo-specific override: make chat text white for the game UI */
.layout--game .chat-box,
.layout--game .chat-line,
.layout--game #messages,
.layout--game #players,
.layout--game .chat-line strong,
.layout--game .chat-line .chat-time {
    color: #ffffff !important;
}

/* Daifugo: speaker name accent and readable card chips inside chat */
.layout--game .chat-line strong {
    color: #00ffd1 !important; /* bright aqua accent for speaker names */
    font-weight: 800;
}
.layout--game .chat-line .chat-time {
    color: rgba(255,255,255,0.7) !important;
    font-size: 12px;
}
.layout--game .card-chip {
    /* dark translucent background with white text for legibility */
    background: rgba(0,0,0,0.45) !important;
    color: #ffffff !important;
    border: 1px solid rgba(255,255,255,0.06) !important;
    box-shadow: 0 6px 18px rgba(0,0,0,0.45) !important;
}
.layout--game .card-chip.chip-red { background: linear-gradient(90deg,#ff7f9f,#ff4f6f) !important; color: #00121a !important; }
.layout--game .card-chip.chip-black { background: linear-gradient(90deg,#dff0ff,#9fd6ff) !important; color: #00121a !important; }

/* Game controls (babanuki) */
.game-controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin:12px 0; }
.game-controls .gc-item { display:flex; align-items:center; gap:8px; font-weight:700; color: #e6f7ff; }
.gc-input { padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.02); color: #e6f7ff; }
.gc-input.gc-small { padding:6px 8px; width:64px; }
.gc-select { padding:8px 10px; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.02); color: #e6f7ff; }
.gc-btn { padding:8px 12px; background: linear-gradient(90deg,#00fff0,#6a8cff); color: #00121a; border-radius:10px; font-weight:800; border:none; cursor:pointer; }
.gc-btn-secondary { background: linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); color: #bfeaf8; border:1px solid rgba(255,255,255,0.06); }
.gc-note { color: #ffdddd; font-size:0.95em; margin-left:8px; }
.gc-desc { width:100%; color:#cfeefc; margin-top:6px; font-size:0.95em; }

/* Modal styles */
.modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(2,6,23,0.6); z-index:2000; }
.modal[aria-hidden="false"] { display:flex; }
.modal-content { background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border-radius:10px; padding:18px; width:90%; max-width:420px; color:#e6f7ff; box-shadow: 0 24px 60px rgba(2,6,23,0.6); }
.modal-content h3 { margin:0 0 8px 0; }

/* responsive tweaks for small screens */
@media (max-width: 640px){
    .game-controls { gap:8px; }
    .game-controls .gc-item { font-size:14px; }
    .gc-desc { font-size:0.9em }
    .gc-input { min-width:140px; }
}

/* highlight target player for drawing */
.baba-target { outline: 3px solid rgba(0,255,200,0.18); background: rgba(0,255,200,0.02); cursor: pointer; }

/* room controls inside game-controls */
#room_controls { margin-left: 8px; }
#room_info { color: #cfeefc; margin-left:8px; }
